%
% A~driver file to typeset \pk{dostrip.dtx} with the \pk{gmdoc}
% package.
%
% GM 2006/12/1
%

\PassOptionsToPackage{indexallmacros}{gmdoc}

\if1 1
  \documentclass[debug]{gmdocc}% 
  \mcdiagOn
\else
  \documentclass[minion]{gmdocc}%
\fi

\ltxLookSetup
\gmdoccMargins
\twocoltoc% For towocolumn table of contents.

\DeleteShortVerb\|
\OldMakeShortVerb*\|% To define shortverb \verb+|+ such that it
% remains shortverb in math mode (by default I~define it to be $\vert$ in
% math mode.

\relaxen\ds
\emptify\EOFMark

\fooatletter{%
  \@ifXeTeX{%
    \let\gm@TrueAcute\'
    \def\'#1{%
      \ifx\f@family\rmdefault
        \if n#1\nacute
        \else\typeout{****** \cs{'} with argument }\show#1
        \fi
      \else
        \gm@TrueAcute#1%
      \fi
    }}{}}

\HideAllDefining

\begin{document}

\def\BasePath{/mnt/middle/TeXLive2005/texmf-dist/source/latex/base/}
%^^A  \tableofcontents
  \addtomacro\endabstract{\aftergroup\tableofcontents}
  \AtBegInputOnce{\date{Printed \today\\ with \pk{gmdoc} package by
      Natror}\let\date\gobble
    \let\renewenvironment\gobbletwo}% the only renewed env.\ in
  % \file{docstrip.dtx} is \env{theglossary}. I~prefer it to be twocolumn.

  \OldDocInput{\BasePath docstrip.dtx}

  \typeout{%
    ^^JProduce change log with^^J%
    makeindex -r -s gmglo.ist -o \jobnamewoe.gls \jobnamewoe.glo^^J}

  \typeout{%
    ^^JProduce index with^^J%
    makeindex -r \jobnamewoe.idx^^J}
 
\end{document}
%\NoEOF
